<!-- dashboard.ejs -->

<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link rel="stylesheet" href="style.css"> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"/>
    <title>Dashboard</title>
    <link rel="stylesheet" href="dashboard.css">
</head>

<body>
    <!-- NAVBAR -->
    <div class="side_bar">
   
        <div class="logo">UnityMed Hospital</div>
     
      <ul>
           
            <li><a href="#"><i class="fas fa-question-circle"></i>About</a></li>
            <li><a href="#"><i class="fas fa-sliders-h"></i>Services</a></li>
            <li><a href="#"><i class="fas fa-phone-volume"></i>Contact</a></li>
            <li><a href="#"><i class="fas fa-comments"></i>Feedback</a></li>
          </ul>
          <!-- <div class="media_icons">
            <a href="#"><i class="fab fa-facebook-f"></i></a>
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-youtube"></i></a>
          </div> -->
    </div>

    <!-- ----------------------------SIDE HAMBURHER NAVBAR----------------------------------------------------- -->
    <nav role="navigation">
        <div id="menuToggle">

            <input type="checkbox" />

            <span></span>
            <span></span>
            <span></span>

            <ul id="menu">
                <li>
                    <a href="#" class="sidebar-link" data-option="dashboard">Dashboard</a>
                </li>
                <li>
                    <a href="#" class="sidebar-link" data-option="bookAppointment">Book Appointment</a>
                </li>
                <li>
                    <a href="#" class="sidebar-link" data-option="appointmentHistory">Appointment History</a>
                </li>
                <li>
                    <a href="#" class="sidebar-link" data-option="prescription">Prescriptions</a>
                </li>
                <li>
                    <a href="/logout">Logout</a>
                </li>

            </ul>
        </div>
    </nav>

    <div id="main-content">
        <section>
            <div id="userInfo">
                <h1>Welcome to the Dashboard</h1>
                <p><strong>Username:</strong>
                    <%= user.username %>
                </p>
                <p><strong>Patient ID:</strong>
                    <%= user.patientId %>
                </p>
                <p><strong>Email:</strong>
                    <%= user.email %>
                </p>
                <p><strong>Full Name:</strong>
                    <%= user.fullName %>
                </p>
                <p><strong>Phone Number</strong>
                    <%= user.phone %>
                </p>
                <p><strong>Date of Birth:</strong>
                    <%= user.dob.toLocaleDateString('en-GB') %>
                </p>
                <p><strong>Gender:</strong>
                    <%= user.gender %>
                </p>

            </div>
        </section>


        <section>
            <div id="bookAppointment">

                <h2>Book Appointment</h2>
                <form action="/bookAppointment" method="POST">
                    <h2>Appointment Form</h2>

                    <div class="form-group">
                        <label for="patientName">Patient Name:</label>
                        <input type="text" id="patientName" name="patientName" value="<%= user.fullName %>" readonly>
                    </div>

                    <div class="form-group">
                        <label for="doctor">Select Doctor:</label>
                        <select id="doctor" name="doctor" required>
                            <option value="doctor1">Doctor 1</option>
                            <option value="doctor2">Doctor 2</option>
                            <option value="doctor3">Doctor 3</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="dateTime">Select Date and Time:</label>
                        <input type="datetime-local" id="dateTime" name="dateTime" required>
                    </div>

                    <div class="form-group">
                        <label for="reason">Reason for Appointment:</label>
                        <textarea id="reason" name="reason" rows="4" required></textarea>
                    </div>

                    <button type="submit">Submit Appointment</button>
                </form>
            </div>
        </section>

        <section>

            <div id="appointmentHistory">
                <h2>Appointment History</h2>

                <% if (appointments && appointments.length> 0) { %>
                    <table>
                        <thead>
                            <tr>
                                <th>Doctor</th>
                                <th>Date and Time</th>
                                <th>Reason</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% appointments.forEach(appointment=> { %>
                                <tr>
                                    <td>
                                        <%= appointment.doctor %>
                                    </td>
                                    <td>
                                        <%= appointment.dateTime.toLocaleString() %>
                                    </td>
                                    <td>
                                        <%= appointment.reason %>
                                    </td>
                                    <td>
                                        <%= appointment.status %>
                                    </td>
                                </tr>
                                <% }); %>
                        </tbody>
                    </table>
                    <% } else { %>
                        <p>No appointment history available.</p>
                        <% } %>
            </div>

        </section>

        <section>
            <div id="prescription">
                <div class="prescription-form">
                    <h2>Doctor's Prescription</h2>
                    <form action="#">
                        <div class="form-group">
                            <label for="patientNamePrescription">Patient Name:</label>
                            <input type="text" id="patientNamePrescription" name="patientNamePrescription" required>
                        </div>
                        <div class="form-group">
                            <label for="medication">Medication:</label>
                            <textarea id="medication" name="medication" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="instructions">Instructions:</label>
                            <textarea id="instructions" name="instructions" required></textarea>
                        </div>
                        <button type="submit">Generate Prescription</button>
                    </form>
                </div>
            </div>
        </section>
        <footer>
            <div class="container">
              <div class="footer-content">
                <div class="footer-section about">
                  <h2>About Us</h2>
                  <p>
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit.<br> Sed sit
                    amet justo libero.
                  </p>
                </div>
                <div class="footer-section contact">
                  <h2>Contact Us</h2>
                  <p>Email: unitymed@hospital.com</p>
                  <p>Phone: +1234567890</p>
                </div>
                <div class="footer-section links">
                  <h2>Quick Links</h2>
                  <ul>
                    <li><a href="#">Home</a></li>
                    <li><a href="#">Doctor</a></li>
                    <li><a href="#">Services</a></li>
                    <li><a href="#">Contact</a></li>
                  </ul>
                </div>
              </div>
              <div class="footer-bottom">
                &copy; 2024 Multispecialty Hospital Management System
              </div>
            </div>
          </footer>


    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>



        // -----------------------------------------------------------------------------------------
        document.addEventListener('DOMContentLoaded', function () {
            // Function to toggle the visibility of dashboard sections
            function toggleDashboardSection(option) {
                var userInfo = document.getElementById('userInfo');
                var bookAppointment = document.getElementById('bookAppointment');
                var appointmentHistory = document.getElementById('appointmentHistory');
                var prescription = document.getElementById('prescription');

                // Hide all sections
                userInfo.style.display = 'none';
                bookAppointment.style.display = 'none';
                appointmentHistory.style.display = 'none';
                prescription.style.display = 'none';

                // Show the selected section
                if (option === 'dashboard') {
                    userInfo.style.display = 'block';
                } else if (option === 'bookAppointment') {
                    bookAppointment.style.display = 'block';
                } else if (option === 'appointmentHistory') {
                    appointmentHistory.style.display = 'block';
                } else if (option === 'prescription') {
                    prescription.style.display = 'block';
                }
            }

            // Add event listeners to dashboard links for toggling sections
            document.querySelectorAll('.sidebar-link').forEach(function (link) {
                link.addEventListener('click', function (event) {
                    event.preventDefault(); // Prevent default link behavior
                    var option = event.target.getAttribute('data-option');
                    toggleDashboardSection(option);
                });
            });
        });


    </script>

</body>

</html>